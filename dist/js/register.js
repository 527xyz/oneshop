"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}var Register_wrap=function(){function e(){_classCallCheck(this,e),this.init()}return _createClass(e,[{key:"init",value:function(){this.tow_tip(),this.anew_focus(),this.reg_verify(),this.ipt_change(),this.test(),this.submit()}},{key:"tow_tip",value:function(){$(".register_form>li").find(".re62").on("focus",function(){$(this).next().animate({left:-62},100),$(this).nextAll(".tit").css("display","block").animate({width:160,height:40},100)}),$(".register_form>li").find(".re76").on("focus",function(){$(this).next().animate({left:-76},100),$(this).nextAll(".tit").css("display","block"),$(this).nextAll(".tit_prev").animate({width:160,height:40},100),$(this).nextAll(".tit_last").animate({width:84,height:20},100).find("p").text("请再次输入密码").css("color","#333")})}},{key:"anew_focus",value:function(){$(".register_form>li").find(".reg1").on("focus",function(){$(this).nextAll("em").css("display","none")}),$(".register_form>li").find(".reg2").on("focus",function(){$(this).nextAll("em").css("display","none")}),$(".register_form>li").find(".reg3").on("focus",function(){$(this).nextAll("em").css("display","none")}),$(".register_form>li").find(".tit_last").prevAll(".re76").on("blur",function(){$(this).val()==$(".register_form>li").find(".reg3").val()&&""!=$(this).val()?($(this).nextAll("em").css("display","block"),$(this).nextAll(".tit_last").css("display","none")):$(this).val()!=$(".register_form>li").find(".reg3").val()&&$(this).nextAll(".tit").find("p").text("两次密码不一致").css("color","red")}).on("focus",function(){$(this).nextAll("em").css("display","none"),$(this).nextAll(".tit_last").css("display","block")})}},{key:"reg_verify",value:function(){for(var l=/^[\u4e00-\u9fa50-9a-zA-Z\-]{4,20}$/,r=/^1[3456789]\d{9}$/,a=/^[\x21-\x7E]{6,20}$/,e=document.querySelectorAll(".register_form li"),t=0;t<e.length-1;t++)e[t].onclick=function(e){var s=this,t=e||window.event,i=t.target||t.srcElement;function n(e,t){t.test(e.value)&&($(s).find("em").css("display","block"),$(s).find(".tit").css("display","none").animate({width:0,height:0},100))}"re62 reg1"==i.className&&(i.onblur=function(){n(this,l)}),"re62 reg2"==i.className&&(i.onblur=function(){n(this,r)}),"re76 reg3"==i.className&&(i.onblur=function(){n(this,a),$(this).nextAll(".pass_strong").css("display","none")})}}},{key:"ipt_change",value:function(){var e=/\d/,t=/[a-zA-Z]/,s=/[^(a-zA-Z\d)]/;$(".register_form>li").find(".reg3").bind("input propertychange",function(){e.test(this.value)&&t.test(this.value)&&s.test(this.value)&&5<this.value.length&&this.value.length<21?($(this).nextAll(".tit").css("display","none"),console.log("密码强度：强"),$(this).nextAll(".pass_strong").css("display","none"),$(this).nextAll(".pass_strong3").css("display","block")):(e.test(this.value)&&t.test(this.value)||e.test(this.value)&&s.test(this.value)||s.test(this.value)&&t.test(this.value))&&5<this.value.length&&this.value.length<21?($(this).nextAll(".tit").css("display","none"),console.log("密码强度：中"),$(this).nextAll(".pass_strong").css("display","none"),$(this).nextAll(".pass_strong2").css("display","block")):(e.test(this.value)||t.test(this.value)||s.test(this.value))&&5<this.value.length&&this.value.length<21&&($(this).nextAll(".tit").css("display","none"),console.log("密码强度：弱"),$(this).nextAll(".pass_strong").css("display","none"),$(this).nextAll(".pass_strong1").css("display","block"))})}},{key:"test",value:function(){var e=this;$(".register_form>li").find(".re90").nextAll("a").on("click",function(){$(".register_form>li").find(".re90").val(e.verificationCode()).next().animate({left:-90},50).nextAll("em").css({display:"block",right:-180})})}},{key:"verificationCode",value:function(){function e(e,t){if(t<e){var s=e;e=t,t=s}return Math.floor(Math.random()*(t-e+1)+e)}for(var t="",s=0;s<4;s++){t+=e(0,9)+String.fromCharCode(e(65,90))+String.fromCharCode(e(97,122))}var i="";for(s=0;s<4;s++)i+=t[e(0,t.length-1)];return i}},{key:"submit",value:function(){var t=document.querySelectorAll(".register_form>li>input"),s=document.querySelectorAll(".register_form>li>.tit"),i=document.querySelectorAll(".register_form>li>em"),n=document.getElementsByClassName("reg1")[0],l=document.getElementsByClassName("reg2")[0],r=document.getElementsByClassName("reg3")[0],a=0,o=0,c=0;$(".register_form>li>.agreement_word").nextAll("a").on("click",function(){for(var e=0;e<t.length;e++)if(""==t[e].value){a=1;break}1==a&&alert("您还有信息没有填写，请全部填写后再点击注册");for(e=0;e<s.length;e++)if("block"==$(s[e]).css("display")&&0==a){o=1;break}1==o?(alert("请按规则提示填写"),o=0):a=0;for(e=0;e<i.length;e++){if("none"==$(i[e]).css("display")){c=1;break}c=0}0==c&&$.ajax({url:"../php/register.php",data:"username=".concat(n.value,"&password=").concat(r.value,"&phonenumber=").concat(l.value),success:function(e){var t=JSON.parse(e);0==t.code?alert("注册失败，用户名已存在"):1==t.code&&(alert("注册成功,点击确定跳转到登录界面"),location.href="../pages/login.html")}})})}}]),e}();new Register_wrap;