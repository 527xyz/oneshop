"use strict";function _classCallCheck(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function _createClass(i,n,e){return n&&_defineProperties(i.prototype,n),e&&_defineProperties(i,e),i}var Login_wrap=function(){function i(){_classCallCheck(this,i),this.login_name=document.querySelector(".login_id"),this.more=document.querySelector(".more"),this.more_link=document.querySelector(".more_landing"),this.code=document.querySelector(".qr_code").children[1],this.auto=document.querySelector(".auto_login"),this.init(),this.index=0}return _createClass(i,[{key:"init",value:function(){this.focus(),this.blur(),this.mouse(),this.iptchange(),this.more1(),this.code1(),this.autopass(),this.login_ajax()}},{key:"autopass",value:function(){var i=this;this.auto.children[0].onclick=function(){1==this.checked?i.auto.children[2].style.display="inline-block":0==this.checked&&(i.auto.children[2].style.display="none")}}},{key:"code1",value:function(){this.code.onmouseenter=function(){this.src="../images/ewm2.jpg"},this.code.onmouseleave=function(){this.src="../images/ewm1.jpg"}}},{key:"more1",value:function(){var i=this;this.more.onclick=function(){return 0==i.index?(i.more_link.style.display="block",void(i.index=1)):(i.index=1)?(i.more_link.style.display="none",void(i.index=0)):void 0}}},{key:"iptchange",value:function(){var i=this;this.login_name.oninput=function(){this.style.color="black",console.log(1),i.getCookie(this.value)?(console.log(2),$(".login_form>.login_pass>input").val(i.getCookie(this.value)),i.auto.children[0].checked=!0,i.auto.children[2].style.display="inline-block"):$(".login_form>.login_pass>input").val("")}}},{key:"mouse",value:function(){this.login_name.onmouseenter=function(){this.focus()},this.login_name.onmouseleave=function(){this.blur()}}},{key:"focus",value:function(){this.login_name.onfocus=function(){"邮箱/手机/用户名"==this.value&&(this.value="")}}},{key:"blur",value:function(){this.login_name.onblur=function(){""==this.value&&(this.value="邮箱/手机/用户名",this.style.color="#ccc")}}},{key:"login_ajax",value:function(){var e=this;$(".login_form>.auto_login>button").on("click",function(){return $(".error_tip").css("display","block"),"邮箱/手机/用户名"==$(".login_name>.login_id").val()&&""==$(".login_pass>input").val()?$(".error_tip").html("<i class='iconfont icon-brainsmartbulb'></i> 请输入账户名和密码"):"邮箱/手机/用户名"==$(".login_name>.login_id").val()?$(".error_tip").html("<i class='iconfont icon-brainsmartbulb'></i> 请输入账户名"):""==$(".login_pass>input").val()&&$(".error_tip").html("<i class='iconfont icon-brainsmartbulb'></i> 请输入密码"),$.ajax({url:"../php/login.php",data:"username=".concat($(".login_name>.login_id").val(),"&password=").concat($(".login_pass>input").val()),success:function(i){var n=JSON.parse(i);1==n.code&&"邮箱/手机/用户名"!=$(".login_name>.login_id").val()&&""!=$(".login_pass>input").val()?$(".error_tip").html("<i class='iconfont icon-brainsmartbulb'></i> 用户名不存在").css("color","red"):2==n.code&&""!=$(".login_pass>input").val()?$(".error_tip").html("<i class='iconfont icon-brainsmartbulb'></i> 密码错误").css("color","red"):3==n.code&&($(".error_tip").css("display","none"),"inline-block"==$(".auto_login>em").css("display")&&e.setCookie($(".login_name>.login_id").val(),$(".login_pass>input").val(),7),document.cookie="active=true",document.cookie="user=".concat($(".login_name>.login_id").val()),location.href="../pages/index.html")}}),!1})}},{key:"setCookie",value:function(i,n,e){var o=new Date;o.setDate(o.getDate()+e),document.cookie="".concat(i,"=").concat(n,";expires=").concat(o)}},{key:"getCookie",value:function(i){for(var n,e=document.cookie.split("; "),o=0;o<e.length;o++)if((n=e[o].split("="))[0]==i)return n[1]}}]),i}();new Login_wrap;